#:kivy 2.1.0
#:import Factory kivy.factory.Factory

<DashboardWidget>:
    orientation: 'vertical'
    padding: 10
    spacing: 10
    
    BoxLayout:
        size_hint_y: 0.6
        spacing: 10
        
        # CPU and Memory in first row
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.5
            canvas.before:
                Color:
                    rgba: 0.1, 0.1, 0.1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
            
            Label:
                text: 'CPU Usage'
                size_hint_y: 0.2
                font_size: '18sp'
            
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: 0.8
                padding: 10
                
                Label:
                    id: cpu_percent
                    text: '0%'
                    font_size: '36sp'
                
                Widget:
                    id: cpu_graph
                    size_hint_y: 0.7
        
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.5
            canvas.before:
                Color:
                    rgba: 0.1, 0.1, 0.1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
            
            Label:
                text: 'Memory Usage'
                size_hint_y: 0.2
                font_size: '18sp'
            
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: 0.8
                padding: 10
                
                Label:
                    id: memory_percent
                    text: '0%'
                    font_size: '36sp'
                
                Widget:
                    id: memory_graph
                    size_hint_y: 0.7
    
    BoxLayout:
        size_hint_y: 0.4
        spacing: 10
        
        # Disk and Network in second row
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.5
            canvas.before:
                Color:
                    rgba: 0.1, 0.1, 0.1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
            
            Label:
                text: 'Disk Usage'
                size_hint_y: 0.2
                font_size: '18sp'
            
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: 0.8
                padding: 10
                
                Label:
                    id: disk_percent
                    text: '0%'
                    font_size: '24sp'
                
                Label:
                    id: disk_io
                    text: 'Read: 0 B/s | Write: 0 B/s'
                    font_size: '14sp'
                
                Widget:
                    id: disk_graph
                    size_hint_y: 0.6
        
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.5
            canvas.before:
                Color:
                    rgba: 0.1, 0.1, 0.1, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
            
            Label:
                text: 'Network Activity'
                size_hint_y: 0.2
                font_size: '18sp'
            
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: 0.8
                padding: 10
                
                Label:
                    id: network_speed
                    text: 'Up: 0 B/s | Down: 0 B/s'
                    font_size: '18sp'
                
                Widget:
                    id: network_graph
                    size_hint_y: 0.7

<CPUWidget>:
    orientation: 'vertical'
    padding: 10
    spacing: 10
    
    BoxLayout:
        size_hint_y: 0.2
        spacing: 10
        
        Label:
            text: 'CPU Usage'
            font_size: '24sp'
            size_hint_x: 0.3
        
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.7
            
            Label:
                id: cpu_percent
                text: 'Total: 0%'
                font_size: '20sp'
                halign: 'left'
                text_size: self.size
                valign: 'middle'
            
            Label:
                id: cpu_count
                text: 'Cores: 0 (0 physical)'
                font_size: '16sp'
                halign: 'left'
                text_size: self.size
                valign: 'middle'
    
    BoxLayout:
        id: per_cpu_layout
        orientation: 'vertical'
        size_hint_y: 0.4
        spacing: 5
        # Per-CPU bars will be added here dynamically
    
    BoxLayout:
        size_hint_y: 0.4
        orientation: 'vertical'
        
        Label:
            text: 'CPU Usage History'
            font_size: '18sp'
            size_hint_y: 0.1
        
        Widget:
            id: cpu_history_graph
            size_hint_y: 0.9

<MemoryWidget>:
    orientation: 'vertical'
    padding: 10
    spacing: 10
    
    BoxLayout:
        size_hint_y: 0.3
        spacing: 10
        
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.5
            
            Label:
                text: 'Memory Usage'
                font_size: '24sp'
            
            Label:
                id: memory_percent
                text: '0%'
                font_size: '36sp'
        
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.5
            
            Label:
                id: memory_used
                text: 'Used: 0 B'
                font_size: '16sp'
                halign: 'left'
                text_size: self.size
                valign: 'middle'
            
            Label:
                id: memory_available
                text: 'Available: 0 B'
                font_size: '16sp'
                halign: 'left'
                text_size: self.size
                valign: 'middle'
            
            Label:
                id: memory_total
                text: 'Total: 0 B'
                font_size: '16sp'
                halign: 'left'
                text_size: self.size
                valign: 'middle'
    
    BoxLayout:
        size_hint_y: 0.3
        orientation: 'vertical'
        spacing: 5
        padding: 10
        canvas.before:
            Color:
                rgba: 0.1, 0.1, 0.1, 1
            Rectangle:
                pos: self.pos
                size: self.size
        
        Label:
            text: 'Memory Distribution'
            font_size: '18sp'
            size_hint_y: 0.2
        
        Widget:
            id: memory_pie_chart
            size_hint_y: 0.8
    
    BoxLayout:
        size_hint_y: 0.4
        orientation: 'vertical'
        
        Label:
            text: 'Memory Usage History'
            font_size: '18sp'
            size_hint_y: 0.1
        
        Widget:
            id: memory_history_graph
            size_hint_y: 0.9

<DiskWidget>:
    orientation: 'vertical'
    padding: 10
    spacing: 10
    
    BoxLayout:
        size_hint_y: 0.3
        spacing: 10
        
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.5
            
            Label:
                text: 'Disk Usage'
                font_size: '24sp'
            
            Label:
                id: disk_percent
                text: '0%'
                font_size: '36sp'
        
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.5
            
            Label:
                id: disk_used
                text: 'Used: 0 B'
                font_size: '16sp'
                halign: 'left'
                text_size: self.size
                valign: 'middle'
            
            Label:
                id: disk_free
                text: 'Free: 0 B'
                font_size: '16sp'
                halign: 'left'
                text_size: self.size
                valign: 'middle'
            
            Label:
                id: disk_total
                text: 'Total: 0 B'
                font_size: '16sp'
                halign: 'left'
                text_size: self.size
                valign: 'middle'
    
    BoxLayout:
        size_hint_y: 0.3
        orientation: 'vertical'
        spacing: 5
        
        Label:
            text: 'Disk I/O Activity'
            font_size: '18sp'
            size_hint_y: 0.2
        
        BoxLayout:
            size_hint_y: 0.4
            
            Label:
                text: 'Read:'
                size_hint_x: 0.2
            
            Label:
                id: disk_read_bytes
                text: '0 B/s'
                size_hint_x: 0.3
            
            Label:
                text: 'Write:'
                size_hint_x: 0.2
            
            Label:
                id: disk_write_bytes
                text: '0 B/s'
                size_hint_x: 0.3
        
        BoxLayout:
            size_hint_y: 0.4
            
            Label:
                text: 'Read operations:'
                size_hint_x: 0.2
            
            Label:
                id: disk_read_count
                text: '0'
                size_hint_x: 0.3
            
            Label:
                text: 'Write operations:'
                size_hint_x: 0.2
            
            Label:
                id: disk_write_count
                text: '0'
                size_hint_x: 0.3
    
    BoxLayout:
        size_hint_y: 0.4
        orientation: 'vertical'
        
        Label:
            text: 'Disk I/O History'
            font_size: '18sp'
            size_hint_y: 0.1
        
        Widget:
            id: disk_history_graph
            size_hint_y: 0.9

<NetworkWidget>:
    orientation: 'vertical'
    padding: 10
    spacing: 10
    
    BoxLayout:
        size_hint_y: 0.2
        spacing: 10
        
        Label:
            text: 'Network Activity'
            font_size: '24sp'
            size_hint_x: 0.4
        
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.6
            
            Label:
                id: network_sent_speed
                text: 'Upload: 0 B/s'
                font_size: '16sp'
                halign: 'left'
                text_size: self.size
                valign: 'middle'
            
            Label:
                id: network_recv_speed
                text: 'Download: 0 B/s'
                font_size: '16sp'
                halign: 'left'
                text_size: self.size
                valign: 'middle'
    
    BoxLayout:
        size_hint_y: 0.3
        orientation: 'vertical'
        spacing: 5
        
        Label:
            text: 'Network Statistics'
            font_size: '18sp'
            size_hint_y: 0.2
        
        GridLayout:
            cols: 2
            size_hint_y: 0.8
            
            Label:
                text: 'Total Sent:'
                halign: 'right'
                padding: [0, 0, 10, 0]
                text_size: self.size
                valign: 'middle'
            
            Label:
                id: network_bytes_sent
                text: '0 B'
                halign: 'left'
                text_size: self.size
                valign: 'middle'
            
            Label:
                text: 'Total Received:'
                halign: 'right'
                padding: [0, 0, 10, 0]
                text_size: self.size
                valign: 'middle'
            
            Label:
                id: network_bytes_recv
                text: '0 B'
                halign: 'left'
                text_size: self.size
                valign: 'middle'
            
            Label:
                text: 'Packets Sent:'
                halign: 'right'
                padding: [0, 0, 10, 0]
                text_size: self.size
                valign: 'middle'
            
            Label:
                id: network_packets_sent
                text: '0'
                halign: 'left'
                text_size: self.size
                valign: 'middle'
            
            Label:
                text: 'Packets Received:'
                halign: 'right'
                padding: [0, 0, 10, 0]
                text_size: self.size
                valign: 'middle'
            
            Label:
                id: network_packets_recv
                text: '0'
                halign: 'left'
                text_size: self.size
                valign: 'middle'
    
    BoxLayout:
        size_hint_y: 0.5
        orientation: 'vertical'
        
        Label:
            text: 'Network History'
            font_size: '18sp'
            size_hint_y: 0.1
        
        Widget:
            id: network_history_graph
            size_hint_y: 0.9

<SystemInfoWidget>:
    orientation: 'vertical'
    padding: 10
    spacing: 10
    
    Label:
        text: 'System Information'
        font_size: '24sp'
        size_hint_y: 0.1
    
    ScrollView:
        size_hint_y: 0.9
        
        GridLayout:
            id: system_info_grid
            cols: 2
            size_hint_y: None
            height: self.minimum_height
            row_default_height: 40
            row_force_default: True
            spacing: 10
            padding: 10

<HistoryWidget>:
    orientation: 'vertical'
    padding: 10
    spacing: 10
    
    BoxLayout:
        size_hint_y: 0.1
        spacing: 10
        
        Label:
            text: 'Historical Data'
            font_size: '24sp'
            size_hint_x: 0.4
        
        BoxLayout:
            size_hint_x: 0.6
            
            Label:
                text: 'Time period:'
                size_hint_x: 0.3
            
            Spinner:
                id: time_period_spinner
                text: '1 hour'
                values: ['30 minutes', '1 hour', '3 hours', '6 hours', '12 hours', '24 hours']
                size_hint_x: 0.7
                on_text: root.update_time_period(self.text)
    
    BoxLayout:
        size_hint_y: 0.1
        spacing: 10
        
        ToggleButton:
            text: 'CPU'
            group: 'metrics'
            state: 'down'
            on_press: root.show_metric('cpu_percent')
        
        ToggleButton:
            text: 'Memory'
            group: 'metrics'
            on_press: root.show_metric('memory_percent')
        
        ToggleButton:
            text: 'Disk Usage'
            group: 'metrics'
            on_press: root.show_metric('disk_percent')
        
        ToggleButton:
            text: 'Disk I/O'
            group: 'metrics'
            on_press: root.show_metric('disk_io')
        
        ToggleButton:
            text: 'Network'
            group: 'metrics'
            on_press: root.show_metric('network')
    
    BoxLayout:
        size_hint_y: 0.8
        orientation: 'vertical'
        
        Label:
            id: history_title
            text: 'CPU Usage History (1 hour)'
            font_size: '18sp'
            size_hint_y: 0.1
        
        Widget:
            id: history_graph
            size_hint_y: 0.9
